{"version":3,"sources":["../../../assets/assets/Jogador.js"],"names":["Personagem","require","cc","Class","extends","properties","_acelerando","_vidaAtual","vidaMaxima","velocidade","barraVida","ProgressBar","pontuacao","label","Label","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","teclaPressionada","KEY_UP","teclaSolta","canvas","find","mudarDirecao","atirar","director","getCollisionManager","enabled","progress","adicionarPonto","pontos","string","tomarDano","dano","porcentagemVida","loadScene","event","posicaoMouse","getLocation","Vec2","x","y","direcao","sub","node","position","normalize","_direcao","keyCode","KEY","a","update","dt","deslocamento","mul","add"],"mappings":";;;;;;AAAA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASJ,UADJ;;AAGLK,gBAAY;AACRC,qBAAY,KADJ;AAERC,oBAAY,CAFJ;AAGRC,oBAAa,GAHL;AAIRC,oBAAY,EAJJ;AAKRC,mBAAYR,GAAGS,WALP;AAMRC,mBAAU,CANF;AAORC,eAAQX,GAAGY;;AAPH,KAHP;;AAeL;AACAC,YAAQ,kBAAY;;AAEhB,aAAKR,UAAL,GAAkB,KAAKC,UAAvB;AACAN,WAAGc,WAAH,CAAeC,EAAf,CAAkBf,GAAGgB,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKC,gBAA1D,EAA4E,IAA5E;AACAnB,WAAGc,WAAH,CAAeC,EAAf,CAAkBf,GAAGgB,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAmD,KAAKC,UAAxD,EAAoE,IAApE;;AAEA,YAAIC,SAAStB,GAAGuB,IAAH,CAAQ,QAAR,CAAb;AACAD,eAAOP,EAAP,CAAU,WAAV,EAAuB,KAAKS,YAA5B,EAA0C,IAA1C;AACAF,eAAOP,EAAP,CAAU,WAAV,EAAuB,KAAKU,MAA5B,EAAoC,IAApC;;AAEAzB,WAAG0B,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;;AAEA,aAAKpB,SAAL,CAAeqB,QAAf,GAA0B,CAA1B;AAEH,KA9BI;;AAgCLC,oBAAgB,wBAASC,MAAT,EAChB;AACI,aAAKrB,SAAL,IAAkBqB,MAAlB;AACA,aAAKpB,KAAL,CAAWqB,MAAX,GAAoB,aAAa,KAAKtB,SAAtC;AAEH,KArCI;;AAuCLuB,eAAU,mBAASC,IAAT,EACV;AACI,aAAK7B,UAAL,IAAmB6B,IAAnB;;AAEA,YAAIC,kBAAkB,KAAK9B,UAAL,GAAgB,KAAKC,UAA3C;;AAEA,aAAKE,SAAL,CAAeqB,QAAf,GAA0BM,eAA1B;;AAEA,YAAG,KAAK9B,UAAL,GAAkB,CAArB,EACI;AACIL,eAAG0B,QAAH,CAAYU,SAAZ,CAAsB,UAAtB;AACH;AACR,KAnDI;;AAsDLZ,kBAAc,sBAASa,KAAT,EACd;AACI,YAAIC,eAAeD,MAAME,WAAN,EAAnB;AACAD,uBAAe,IAAItC,GAAGwC,IAAP,CAAYF,aAAaG,CAAzB,EAA4BH,aAAaI,CAAzC,CAAf;;AAEA,YAAIC,UAAUL,aAAaM,GAAb,CAAiB,KAAKC,IAAL,CAAUC,QAA3B,CAAd;AACAH,kBAAUA,QAAQI,SAAR,EAAV;AACA,aAAKC,QAAL,GAAgBL,OAAhB;AACH,KA9DI;;AAgELxB,sBAAkB,0BAASkB,KAAT,EAClB;AACI,YAAGA,MAAMY,OAAN,IAAiBjD,GAAGkD,GAAH,CAAOC,CAA3B,EACA;AACI,iBAAK/C,WAAL,GAAmB,IAAnB;AACH;AACJ,KAtEI;;AAwELiB,gBAAW,oBAASgB,KAAT,EACX;AACI,YAAGA,MAAMY,OAAN,IAAiBjD,GAAGkD,GAAH,CAAOC,CAA3B,EACA;AACI,iBAAK/C,WAAL,GAAmB,KAAnB;AACH;AAEJ,KA/EI;;AAiFL;AACAgD,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAG,KAAKjD,WAAR,EACA;AACI,gBAAIkD,eAAe,KAAKN,QAAL,CAAcO,GAAd,CAAkB,KAAKhD,UAAL,GAAkB8C,EAApC,CAAnB;AACA,iBAAKR,IAAL,CAAUC,QAAV,GAAsB,KAAKD,IAAL,CAAUC,QAAV,CAAmBU,GAAnB,CAAuBF,YAAvB,CAAtB;AACH;AAIJ;AA3FI,CAAT","file":"Jogador.js","sourceRoot":"../../../assets","sourcesContent":["let Personagem = require(\"Personagem\");\ncc.Class({\n    extends: Personagem,\n\n    properties: {\n        _acelerando:false,\n        _vidaAtual: 0,\n        vidaMaxima : 100,\n        velocidade: 10,\n        barraVida : cc.ProgressBar,\n        pontuacao:0,\n        label : cc.Label,\n\n\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        this._vidaAtual = this.vidaMaxima;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.teclaPressionada, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.teclaSolta, this);\n\n        let canvas = cc.find(\"Canvas\");\n        canvas.on(\"mousemove\", this.mudarDirecao, this);\n        canvas.on(\"mousedown\", this.atirar, this);\n\n        cc.director.getCollisionManager().enabled = true;\n\n        this.barraVida.progress = 1;\n\n    },\n\n    adicionarPonto: function(pontos)\n    {\n        this.pontuacao += pontos;\n        this.label.string = \"Pontos: \" + this.pontuacao;\n        \n    },\n\n    tomarDano:function(dano)\n    {\n        this._vidaAtual -= dano;  \n\n        let porcentagemVida = this._vidaAtual/this.vidaMaxima;\n\n        this.barraVida.progress = porcentagemVida;\n        \n        if(this._vidaAtual < 0)\n            {\n                cc.director.loadScene(\"GameOver\");\n            }\n    },\n\n\n    mudarDirecao: function(event)\n    {\n        let posicaoMouse = event.getLocation();\n        posicaoMouse = new cc.Vec2(posicaoMouse.x, posicaoMouse.y);\n\n        let direcao = posicaoMouse.sub(this.node.position);\n        direcao = direcao.normalize();\n        this._direcao = direcao;\n    },\n\n    teclaPressionada: function(event)\n    { \n        if(event.keyCode == cc.KEY.a)\n        {\n            this._acelerando = true;\n        }\n    },\n\n    teclaSolta:function(event)\n    {\n        if(event.keyCode == cc.KEY.a)\n        {\n            this._acelerando = false;\n        }\n\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._acelerando)\n        {\n            let deslocamento = this._direcao.mul(this.velocidade * dt)\n            this.node.position  = this.node.position.add(deslocamento);\n        }\n\n\n\n    },\n});\n"]}